<template>
  <div class="tag-item">
    <!-- infobar-->
    <div class="wrap">
      <!-- heading-->
      <div class="heading green">TAGS</div>
      <!-- info-->
      <div class="infobar">Tag items that you see on the image, you can validate it first by checking on the thesaurus before adding the tag.</div>
			<div  class="searchbox">
    		<input id="annotationInput" autocomplete="off" value.bind="prefix & debounce:500" input.delegate="prefixChanged() & debounce:500"  type="text"  placeholder.bind="placeholderText" class="input-tag"/>
        <div show.bind='suggestionsActive' class="autocomplete-suggestions-itemview" style="width: 100%; z-index: 9999;">
          <ul class="suggestions">
						<li click.delegate="selectSuggestedAnnotation(item.id)" repeat.for="item of suggestedAnnotations" id="${$index}"><span>${item.label}</span><a if.bind="item.lang">${item.lang}</a><a style="padding-right:10px" class="fa fa-link" click.delegate="goToURI(item.uri)"></a></li>
          </ul>
        </div>
      </div>
      <!-- taglist-->
			<div class="show-more-parent">
      <ul class="taglist show-more-target">
        <li repeat.for="ann of annotations">
        	<div class="text">${ann.label}</div>
        	<ul class="action">
          	<li class.bind="ann.approvedByMe ? 'up active' : 'up'">
            	<a href="javascript:void(0)" click.delegate="validate(ann.dbId, 'approved', $index, ann.approvedByMe, ann.rejectedByMe)">
              	<i class="fa fa-thumbs-o-up"></i><span class="count">${ann.approvedBy.length}</span>
            	</a>
          	</li>
          	<li class.bind="ann.rejectedByMe ? 'down active' : 'down'">
            	<a href="javascript:void(0)" click.delegate="validate(ann.dbId, 'rejected', $index, ann.approvedByMe, ann.rejectedByMe)">
              	<span class="count">${ann.rejectedBy.length}</span><i class="fa fa-thumbs-o-down"></i>
            	</a>
						</li>
          	<li class="delete" if.bind="ann.createdByMe && ann.approvedBy.length==0 && ann.rejectedBy.length==0">
            	<a href="javascript:void(0)" click.delegate="deleteAnnotation(ann.dbId, $index)">
              	<img src="/img/ic-delete.png">
            	</a>
          	</li>
        	</ul>
      	</li>
    	</ul>
			<i class="show-more fa fa-chevron-down green" title="Load more" click.delegate='toggleLoadMore(".taglist")'></i>
		</div>
    </div>
  </div>
</template>
