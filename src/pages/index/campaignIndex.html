<template>

  <main>
    <!-- banner-->
    <section class="banner">
      <div class="container">
        <!-- lbl-->
        <div class="bannertext">
          <div class="line">
            <div class="wrap"><span>CROWDSOURCING</span></div>
          </div>
          <div class="line">
            <div class="wrap"><span>CAMPAIGNS</span></div>
          </div>
        </div>
        <!-- vertical nav-->
        <nav class="vertical">
          <ul>
            <li><a href="javascript:void(0)" click.delegate="scrollTo('#sorting')"> <img src="/img/ic-arrow-left-black.png">CONTRIBUTE NOW</a></li>
            <li>${campaignsCount | campaignCounter}</li>
          </ul>
        </nav>
        <div class="bgwrap"></div>
      </div>
    </section>
    <!-- campaign list-->
    <section class="campaigns">
      <div class="container">
        <!-- top section-->
        <div class="topsection">
          <!-- label-->
          <div class="sectionlabel">
            <div class="bold">
              <!-- State - Filter-->
              <div class="state">
                <a id="sorting" href="javascript:void(0)" click.delegate="toggleStateMenu()" data-toggle="dropdown">
                  <span class="text">${state.toUpperCase()}
                    <span class="arrow"><img width="11px" src="/img/ic-arrow-down-white.png"></span>
                  </span>
                </a>
                <!-- dropdown-->
                <ul aria-labelledby="sorting" class="dropdown-menu">
                  <li> <a href="javascript:void(0)" click.delegate="reloadCampaigns('all', sortBy)">ALL</a></li>
                  <li> <a href="javascript:void(0)" click.delegate="reloadCampaigns('inactive', sortBy)">INACTIVE</a></li>
                  <li> <a href="javascript:void(0)" click.delegate="reloadCampaigns('active', sortBy)">ACTIVE</a></li>
                  <li> <a href="javascript:void(0)" click.delegate="reloadCampaigns('upcoming', sortBy)">UPCOMING</a></li>
                </ul>
              </div>
            </div>
            <span>CROWDSOURCING CAMPAIGNS</span>
          </div>
          <!-- Sort - Filter-->
          <div class="sort">
            <!-- label-->
            <div class="lbl">SORT BY </div>
            <!-- sort-->
            <a id="sorting" href="javascript:void(0)" click.delegate="toggleSortMenu()" data-toggle="dropdown"><span class="text">${sortBy.toUpperCase()}</span><span class="arrow"><img src="/img/ic-arrow-down-green.png"></span></a>
            <!-- dropdown-->
            <ul aria-labelledby="sorting" class="dropdown-menu">
              <li> <a href="javascript:void(0)" click.delegate="reloadCampaigns(state, 'Alphabetical')">ALPHABETICAL</a></li>
              <li> <a href="javascript:void(0)" click.delegate="reloadCampaigns(state, 'Date')">DATE</a></li>
            </ul>
          </div>
        </div>
        <br />

        <!-- list-->
        <div class="list">
          <!-- campaign-->
          <div class="campaign" repeat.for="camp of campaigns">
            <!-- no--><span class="no">${camp.username | campaignUsernameTrim }</span>
            <!-- thumbs-->
            <div class="thumbs">
              <!-- wrap--><a route-href="route: summary; params.bind: {cname: camp.username}"><img class="centered-and-cropped" src.bind="camp.banner" onError="this.src='/img/assets/img/ui/ic-noimage.png'" />
                <!-- action-->
                <div class="action"><span class="plus">+ </span>OPEN CAMPAIGN</div></a>
            </div>
            <!-- detail-->
            <div class="details">
              <!-- title-->
              <a a route-href="route: summary; params.bind: {cname: camp.username}">
                <h1 if.bind="camp.status == 'active'">${camp.title} <img width="20px" align="right" title="Active Campaign" src="/img/status-active.png"></h1>
                <h1 if.bind="camp.status == 'inactive'">${camp.title} <img width="20px" align="right" title="Inactive Campaign" src="/img/status-inactive.png"></h1>
                <h1 if.bind="camp.status == 'upcoming'">${camp.title} <img width="20px" align="right" title="Upcoming Campaign" src="/img/status-upcoming.png"></h1>
              </a>
              <!-- desc-->
              <p>${camp.description}</p>
              <!-- progress-->
              <div class="progress-line">
                <!-- bar-->
                <div class="progress">
                  <div role="progressbar" aria-valuenow="${camp.percentage}" aria-valuemin="0" aria-valuemax="100" style="width: ${camp.percentage}%;" class="progress-bar">
									<div class="labl">${camp.percentage}%</div>
									</div>
								</div>
                <!-- target-->
                <div class="target">${camp.totalCurrent} / ${camp.target}</div>
              </div>
              <!-- stats-->
              <ul class="stats">
                <!-- <li>
                  <div class="lbl">PROGRESS</div>
                  <div class="val">
                    ${camp.percentage}%<small>${camp.totalCurrent}/${camp.target}</small>
                  </div>
                </li> -->
                <li>
                  <div class="lbl">CONTRIBUTORS</div>
                  <div class="val">${camp.contributorsCount}</div>
                </li>
                <li>
                  <div class="lbl">START DATE</div>
                  <div class="val">${camp.startDate | dateFormat}</div>
                </li>
                <li>
                  <div class="lbl">END DATE</div>
                  <div class="val">${camp.endDate | dateFormat}</div>
                </li>
                <li class="contribute" if.bind="camp.status != 'inactive'">
                  <a href="javascript:void(0)" click.delegate="goToRandomItem(camp, 0, [], 0)">CONTRIBUTE NOW</a>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <!-- more-->
        <div class="loadmore">
          <a href="#" show.bind="!loading && more" click.delegate="loadMore()">LOAD MORE</a>
          <div class="more"><i show.bind="loading" class="fa fa-spinner fa-pulse"></i></div>
        </div>
      </div>
    </section>

    <!-- learn more-->
    <section class="learnmore">
      <div class="container">
        <div class="left"><img src="/img/assets/img/content/background-space.png"></div>
        <div class="right">
          <div class="desc">
            <h1>
              Learn more about CrowdHeritage
            </h1>
            <p>
              You’re a Fashion, Culture, Art, Heritage, Sport, Music, landscape lover?
You’re a student, a professional from Educational or Cultural communities?
You’re curious and want to discover European Cultural Heritage?
Join our CrowdHeritage campaigns! <br>
You have questions?
Contact us at <a>with-dev@image.ntua.gr</a><br>
<a  route-href="terms">Terms & conditions</a>
            </p>
          </div>
        </div>
      </div>
    </section>

  </main>
</template>
