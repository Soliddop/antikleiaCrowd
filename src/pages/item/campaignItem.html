<template>
  <main>
    <!-- new banner-->
    <section class="banner mini detail">
      <div class="container">
        <!-- lbl-->
        <div class="bannertext">
          <div class="line">
            <div class="lbl"><span>CAMPAIGN</span></div>
            <div class="wrap"><span>${campaign.title}</span></div>
          </div>
        </div>
        <!-- vertical nav-->
        <nav class="vertical">
          <ul>
            <li><a href="javascript:void(0)" click.delegate="goToCamp(campaign)">
                RETURN TO CAMPAIGN PAGE<img src="/img/ic-arrow-right-black.png" class="space"></a></li>
          </ul>
        </nav>
        <!-- progress-->
        <ul class="collectioninfo">
          <li class="title">${collectionTitle}</li>
          <li class="count">
            <div class="info" show.bind="hasCollection">item ${currentCount} out of ${collectionCount}</div>
            <a class="next" href="javascript:void(0)" click.delegate="nextItem(campaign, collection, records, offset+1)">NEXT ITEM</a>
          </li>
        </ul>
        <!-- bg-->
        <div class="bgwrap" style="background-image: url('${campaign.banner}');"></div>
      </div>
    </section>
    <!-- tagging-->
    <section class="tagging">
      <!-- title-->
      <div class="container" show.bind="!loadRec">
        <div class="title">${record.title}</div>
      </div>
      <!-- wraps-->
      <div class="wraps">
        <div class="container">

          <!-- left-->
          <div class="left" show.bind="!loadRec">
            <!-- img-->
            <div class="img" with.bind="record">
              <img show.bind="(record.vtype=='IMAGE')" src.bind="record.myfullimg" onError="this.src='/img/assets/img/ui/ic-noimage.png'" />
              <!-- Here goes the media, besides images -->
              <div id="mediadiv" innerhtml.bind='mediaDiv'></div>
            </div>
            <!-- metadata-->
            <div class="wrap">
              <div class="metadata">
                <!-- label-->
                <div class="heading">ITEM METADATA</div>
                <!-- info-->
                <ul class="meta">
                  <li if.bind="record.description">
                    <div class="lbl">DESCRIPTION</div>
                    <div class="val">${record.description}</div>
                  </li>
                  <li if.bind="record.dataProvider">
                    <div class="lbl">PROVIDER</div>
                    <div class="val">${record.dataProvider}</div>
                  </li>
                  <li if.bind="record.creator">
                    <div class="lbl">CREATOR</div>
                    <div class="val">${record.creator}</div>
                  </li>
                  <li if.bind="record.rights">
                    <div class="lbl">RIGHTS</div>
                    <div class="val">${record.rights}</div>
                  </li>
                  <li if.bind="record.mediatype">
                    <div class="lbl">MEDIA TYPE</div>
                    <div class="val">${record.mediatype}</div>
                  </li>
                  <li if.bind="record.dbId">
                    <div class="lbl">ITEM URL</div>
                    <div class="val"><a href.bind="record.loc">${record.loc}</a></div>
                  </li>
                  <li if.bind="record.source">
                    <div class="lbl">RECORD SOURCE</div>
                    <div class="val">${record.source}</div>
                  </li>
                  <div repeat.for="dcfield of record.dcfields">
                    <li>
                      <div class="lbl">${dcfield.label.toUpperCase()}</div>
                      <div class="val">${dcfield.value[0]}</div>
                    </li>
                  </div>
                </ul>
                <!-- more-->
                <div class="loadmore"><a href="#">LOAD MORE</a></div>
              </div>
            </div>
          </div>

          <!-- right-->
          <div class="right" if.bind="!loadCamp && !loadRec">
            <compose view-model="widgets/tagitem/tagitem" if.bind="hasMotivation('Tagging')"></compose>
            <compose view-model="widgets/tagcolor/tagcolor"
                     if.bind="hasMotivation('ColorTagging')"
                     model.bind="{'campaign': campaign, 'recId': record.dbId}">
            </compose>
            <compose view-model="widgets/taggeo/taggeo" if.bind="hasMotivation('GeoTagging')"></compose>
          </div>
        </div>
      </div>
    </section>
  </main>
</template>
